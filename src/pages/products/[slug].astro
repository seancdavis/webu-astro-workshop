---
import Layout from '@/layouts/Layout.astro'
import { getCollection } from 'astro:content'

export async function getStaticPaths() {
  const productEntries = await getCollection('product')
  return productEntries.map((product) => ({
    params: { slug: product.slug },
    props: { product },
  }))
}

// const { slug } = Astro.params
// const product = await getEntry('product', slug) as CollectionEntry<'product'>

const product = Astro.props.product

// const { Content } = await product.render();
---

<Layout title="My Merch Store">
  <h1>{product.data.title}</h1>
  <pre>{JSON.stringify(product, null, 2)}</pre>
</Layout>
