---
import Layout from '@/layouts/Layout.astro'
import { productPath } from '@/utils/routes'
import { getCollection } from 'astro:content'

const products = await getCollection('product')
---

<Layout title="My Merch Store">
  <h1>Products</h1>
  <ul>
    {
      products.map((product) => (
        <div>
          <a href={productPath(product)}>
            <h2>{product.data.title}</h2>
          </a>
          <p>{product.data.description}</p>
        </div>
      ))
    }
  </ul>
</Layout>
